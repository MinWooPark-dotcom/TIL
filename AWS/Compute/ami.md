# Today I Learned: AMI, Snapshot, and EC2 관계 정리

## 1. AMI (Amazon Machine Image)란?

* EC2 인스턴스를 생성하기 위한 **템플릿** 역할
* 구성 요소:

  * 루트 볼륨의 **EBS 스냅샷**
  * (옵션) 추가 EBS 스냅샷들
  * 인스턴스 타입, 권한, 블록 디바이스 매핑 등 **메타데이터 정보** 포함

### 핵심 특징

* EC2 인스턴스를 여러 개 생성할 때 재사용 가능
* 사용자 지정 AMI 생성 시 내부적으로 EBS Snapshot 생성

---

## 2. Snapshot이란?

* EBS(Elastic Block Store) 볼륨의 **시점 복사본 (backup)**
* 주로 AMI 생성 시 함께 만들어지며, 단독으로도 수동 생성 가능
* Amazon S3에 저장됨 (사용자는 직접 접근 불가)

### Snapshot 주요 용도

* AMI의 디스크 이미지 구성
* EBS 볼륨 복원 시 사용
* 리전 간 복사 가능 (Cross-Region Snapshot Copy)

---

## 3. AMI 복사 시 내부 동작

* 다른 리전으로 AMI를 복사하면:

  * **새로운 Snapshot 생성됨** (기존 루트 스냅샷 복사)
  * **새로운 AMI 리소스 생성됨** (복사된 스냅샷 기반)
* 즉, 복사 대상 리전에는 다음 리소스가 생김:

  * AMI 1개
  * Snapshot 1개 이상

---

## 4. EC2 인스턴스 생성 시 동작

* AMI를 기반으로 인스턴스를 생성할 경우:

  * Snapshot은 새로 생성되지 않음
  * 인스턴스 1개만 생성됨
  * AMI와 연결된 Snapshot을 기반으로 루트 디바이스가 초기화됨

---

## 핵심 비교표

| 작업                | 생성 리소스                           |
| ----------------- | -------------------------------- |
| EC2 → AMI 생성      | AMI 1개 + Snapshot 1개 이상          |
| AMI → 리전 복사       | (대상 리전에) AMI 1개 + Snapshot 1개 이상 |
| AMI → EC2 인스턴스 생성 | EC2 1개만 생성됨 (Snapshot 없음)        |
| Snapshot 단독 복사    | 대상 리전에 Snapshot만 생성됨             |

---

## 정리 비유

* **AMI**: 인스턴스를 만들기 위한 설명서 📘
* **Snapshot**: 하드디스크 이미지 💾
* **EC2**: 설명서(AMI)를 보고 실제 컴퓨터를 만든 결과 🖥️

---

## 요약

> AMI는 스냅샷을 포함하고 있으며, 리전 간 복사 시 **스냅샷과 함께 새롭게 생성**된다.
> EC2는 AMI로부터 생성되며, **새 스냅샷 없이** 디스크 초기화만 이뤄진다.
> "AMI = Snapshot + 메타데이터" 구조를 정확히 이해하면 문제 유형을 쉽게 풀 수 있다.
